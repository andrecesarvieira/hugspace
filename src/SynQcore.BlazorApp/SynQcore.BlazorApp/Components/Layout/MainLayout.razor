@using SynQcore.BlazorApp.Components
@using SynQcore.BlazorApp.Services.StateManagement
@inject StateManager StateManager
@inject NavigationManager Navigation
@inherits LayoutComponentBase
@implements IDisposable

<AppInitializer>
    <nav>
        <h1><a href="/">SynQcore</a></h1>
        
        <ul>
            <li><a href="/">In√≠cio</a></li>
            
            @if (StateManager.User.IsAuthenticated)
            {
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/feed">Feed</a></li>
                <li><a href="/employees">Colaboradores</a></li>
                <li><a href="/knowledge">Conhecimento</a></li>
                <li><a href="/messages">Mensagens</a></li>
                <li><a href="/profile">Perfil</a></li>
                <li><a href="/search">Buscar</a></li>
                <li><button @onclick="HandleLogout">Sair</button></li>
            }
            else
            {
                <li><a href="/login">Entrar</a></li>
            }
        </ul>
    </nav>

    <main>
        @Body
    </main>

    <footer>
        <p>&copy; @DateTime.Now.Year SynQcore - Rede Social Corporativa</p>
    </footer>
</AppInitializer>

@code {
    protected override void OnInitialized()
    {
        StateManager.OnChange += StateHasChanged;
    }

    private async Task HandleLogout()
    {
        // Implementar logout
        Navigation.NavigateTo("/login");
    }

    public void Dispose()
    {
        StateManager.OnChange -= StateHasChanged;
    }
}
